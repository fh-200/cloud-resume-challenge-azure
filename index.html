<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Freeman Hubbard — Resume</title>
    <meta name="description" content="Resume of Freeman Hubbard: Azure, endpoint management, front-end dev, and automation." />
    <link rel="stylesheet" href="app.css" />
  </head>
  <body>
    <main>
      <!-- Header -->
      <header>
        <div>
          <h1>Freeman Hubbard</h1>
        </div>
        <div class="header-meta">
          <a href="mailto:freemanh.dev@gmail.com">freemanh.dev@gmail.com</a> ·
          <a href="https://github.com/fh-200" target="_blank" rel="noopener">github.com/fh-200</a> ·
          <a href="https://www.linkedin.com/in/freeman-hubbard-97438420b/" target="_blank" rel="noopener">LinkedIn</a>
        </div>
      </header>

      <!-- Summary -->
      <section id="summary" aria-labelledby="summary-h">
        <h2 id="summary-h">Summary</h2>
        <p>
          Proactive Tech Support Specialist with 5 years of experience in technical support, front-end development, and endpoint management.
          Actively earning <strong>Microsoft Certified: Azure Administrator (AZ-104)</strong>. Skilled in Azure infrastructure, identity management,
          and automation, with a proven track record of deploying cloud solutions and streamlining operations through scripting.
        </p>
      </section>

      <!-- Skills -->
      <section id="skills" aria-labelledby="skills-h">
        <h2 id="skills-h">Skills</h2>
        <div class="pills" role="list">
          <span class="pill" role="listitem">Azure (Storage, VNets, NSG, VMSS, Functions, Monitor)</span>
          <span class="pill" role="listitem">Entra ID</span>
          <span class="pill" role="listitem">Intune</span>
          <span class="pill" role="listitem">Active Directory</span>
          <span class="pill" role="listitem">Google Admin Console</span>
          <span class="pill" role="listitem">Auth.js</span>
          <span class="pill" role="listitem">Python</span>
          <span class="pill" role="listitem">JavaScript</span>
          <span class="pill" role="listitem">SQL</span>
          <span class="pill" role="listitem">HTML/CSS</span>
          <span class="pill" role="listitem">Bash/Zsh</span>
          <span class="pill" role="listitem">Neon Postgres</span>
          <span class="pill" role="listitem">Supabase</span>
          <span class="pill" role="listitem">Cloudflare (Workers, R2, D1)</span>
          <span class="pill" role="listitem">Bicep/ARM</span>
          <span class="pill" role="listitem">GitHub Actions</span>
        </div>
      </section>

      <!-- Experience -->
      <section id="experience" aria-labelledby="experience-h">
        <h2 id="experience-h">Experience</h2>

        <div class="item">
          <div class="item-head">
            <div class="item-title">
              Tech Support Specialist · <span class="item-sub">Network Outsource</span>
            </div>
            <div class="item-meta" aria-label="Dates employed">2022–Present</div>
          </div>
          <ul class="clean">
            <li>Configure and secure user accounts in Entra ID and Google Admin Console, ensuring compliance for 500+ users.</li>
            <li>Provide hands-on technical support for clients, managing over 1,000 Chromebooks, Windows, and macOS devices in a K-12 district.</li>
            <li>Streamlined asset tracking and lifecycle management, reducing inventory errors by 20% through optimized systems and processes.</li>
          </ul>
        </div>

        <div class="item">
          <div class="item-head">
            <div class="item-title">
              Co-Founder / Developer · <span class="item-sub">Digital Realms LLC</span>
            </div>
            <div class="item-meta" aria-label="Dates employed">2020–2022</div>
          </div>
          <ul class="clean">
            <li>Built and deployed web apps using Vue.js with Firebase backends, enhancing client functionality.</li>
            <li>Implemented authentication, storage, and serverless solutions for client apps, improving security and scalability.</li>
            <li>Led delivery of webapp, gaining experience in frontend development and serverless solutions.</li>
          </ul>
        </div>
      </section>

      <!-- Projects -->
      <section id="projects" aria-labelledby="projects-h">
        <h2 id="projects-h">Projects</h2>

        <div class="item">
          <div class="item-head">
            <div class="item-title">Cloud Resume Challenge — Azure Edition</div>
            <div class="item-meta">2025</div>
          </div>
          <ul class="clean">
            <li><strong>Hosted a professional resume site</strong> on Azure Static Web Apps with custom domains and HTTPS.</li>
            <li>Developed a visitor counter API using Azure Functions and Cosmos DB, demonstrating serverless efficiency.</li>
            <li>Automated deployments via GitHub Actions CI/CD and provisioned infrastructure with Bicep templates.</li>
            <li>Implemented Azure Monitor and RBAC, ensuring robust observability and secure access control.</li>
          </ul>
        </div>
      </section>

      <!-- Certifications -->
      <section id="certifications" aria-labelledby="certs-h">
        <h2 id="certs-h">Certifications</h2>
        <ul class="clean">
          <li>Microsoft Certified: Azure Administrator Associate (AZ-104) — in progress, expected September 2025</li>
        </ul>
      </section>
    </main>

    <footer>
      <p>
        Visitors to this cloud-hosted resume:
        <span id="visitor-count" aria-live="polite" aria-busy="true">Loading…</span>
        <noscript>Enable JavaScript to see the visitor counter.</noscript>
      </p>
    </footer>

    <script>
      (function () {
        // --- Config: prefer a global override if present (e.g., window.__API_BASE__)
        const isLocalHost =
          location.hostname === "localhost" ||
          location.hostname === "127.0.0.1" ||
          location.hostname.startsWith("192.168.") ||
          location.hostname.endsWith(".local");

        const API_BASE =
          (typeof window !== "undefined" && window.__API_BASE__) ||
          (isLocalHost
            ? "http://localhost:7071" // local Functions host
            : "https://resume-visitors-fn.azurewebsites.net"); // cloud Function App

        const EL = document.getElementById("visitor-count");
        if (!EL) return; // hard guard

        function setCount(val) {
          EL.textContent = Number.isFinite(val) ? String(val) : "—";
          EL.setAttribute("aria-busy", "false");
        }

        async function parseJSONSafe(response) {
          // Some Function runtimes may return empty body for 204/empty 200 — avoid "Unexpected end of JSON input"
          const text = await response.text();
          if (!text) return null;
          try {
            return JSON.parse(text);
          } catch (_) {
            return null;
          }
        }

        // GET current count (no caching)
        async function fetchCount() {
          try {
            const r = await fetch(`${API_BASE}/api/visitors`, {
              method: "GET",
              headers: { Accept: "application/json" },
              cache: "no-store",
              credentials: "omit",
            });
            if (!r.ok) throw new Error(`GET failed ${r.status}`);
            const data = await parseJSONSafe(r);
            if (data && typeof data.count === "number") {
              setCount(data.count);
              return data.count;
            }
            // Fallback if API returns empty/invalid JSON
            setCount(NaN);
            return null;
          } catch (err) {
            console.error("GET /visitors error:", err);
            setCount(NaN);
            return null;
          }
        }

        // POST once per session (client guard; server should still dedupe)
        async function postVisitOncePerSession() {
          const KEY = "crc-posted-visit";
          if (sessionStorage.getItem(KEY) === "1") return;

          try {
            const r = await fetch(`${API_BASE}/api/visitors`, {
              method: "POST",
              headers: { Accept: "application/json" },
              cache: "no-store",
              credentials: "omit",
            });
            // 200/201 expected; tolerate 204
            if (!r.ok && r.status !== 204) throw new Error(`POST failed ${r.status}`);
            const data = await parseJSONSafe(r);
            if (data && typeof data.count === "number") setCount(data.count);
            sessionStorage.setItem(KEY, "1");
          } catch (err) {
            console.warn("POST /visitors error (relying on GET):", err);
          }
        }

        // Run: first GET, then POST when visible (avoids pre-render counts)
        (async () => {
          await fetchCount();

          const triggerPost = () => {
            document.removeEventListener("visibilitychange", onVisChange);
            postVisitOncePerSession();
          };
          const onVisChange = () => {
            if (document.visibilityState === "visible") triggerPost();
          };

          if (document.visibilityState === "visible") {
            triggerPost();
          } else {
            document.addEventListener("visibilitychange", onVisChange, { once: true });
          }
        })();
      })();
    </script>
  </body>
</html>
